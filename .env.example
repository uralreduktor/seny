# =============================================================================
# SENY - Система автоматизации ценообразования и подготовки тендерных документов
# =============================================================================
# Скопируйте этот файл в .env и заполните реальными значениями
# cp .env.example .env

# =============================================================================
# ОКРУЖЕНИЕ
# =============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# =============================================================================
# БАЗА ДАННЫХ (PostgreSQL 16 + pgvector)
# =============================================================================
# Для Docker Compose
POSTGRES_USER=seny
POSTGRES_PASSWORD=change_me_secure_password
POSTGRES_DB=seny_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Для локальной разработки (без Docker)
DATABASE_URL=postgresql+asyncpg://seny:change_me_secure_password@localhost:5432/seny_db

# =============================================================================
# REDIS (Кеш и сессии)
# =============================================================================
# Для Docker Compose
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=change_me_redis_password
REDIS_DB=0

# Для локальной разработки
REDIS_URL=redis://:change_me_redis_password@localhost:6379/0

# =============================================================================
# MINIO (S3-совместимое хранилище файлов)
# =============================================================================
# Для Docker Compose
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=change_me_minio_password
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_BUCKET=seny-files
MINIO_USE_SSL=false

# Для локальной разработки
# MINIO_ENDPOINT=localhost
# MINIO_PORT=9000
# MINIO_ACCESS_KEY=minioadmin
# MINIO_SECRET_KEY=change_me_minio_password

# =============================================================================
# БЕЗОПАСНОСТЬ И АУТЕНТИФИКАЦИЯ
# =============================================================================
# Секретный ключ для JWT токенов (сгенерируйте через: openssl rand -hex 32)
SECRET_KEY=change_me_generate_secure_secret_key_here_min_32_chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS настройки
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOW_HEADERS=*

# =============================================================================
# AI/ML API КЛЮЧИ
# =============================================================================
# OpenAI (для embeddings text-embedding-3-large и резервной модели GPT-4o)
OPENAI_API_KEY=sk-change_me_your_openai_api_key
OPENAI_MODEL=gpt-4o
OPENAI_EMBEDDING_MODEL=text-embedding-3-large
OPENAI_EMBEDDING_DIMENSIONS=3072

# Anthropic (Claude 3.5 Sonnet - основная модель)
ANTHROPIC_API_KEY=sk-ant-change_me_your_anthropic_api_key
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# =============================================================================
# RAG (Retrieval-Augmented Generation)
# =============================================================================
RAG_FRAMEWORK=langchain
RAG_TOP_K=5
RAG_SIMILARITY_THRESHOLD=0.7
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200

# =============================================================================
# OCR И COMPUTER VISION
# =============================================================================
# YOLOv11 для детекции объектов на чертежах
YOLO_MODEL_PATH=models/yolov11.pt
YOLO_CONFIDENCE_THRESHOLD=0.5

# EasyOCR для распознавания текста
EASYOCR_LANGUAGES=ru,en
OCR_CONFIDENCE_THRESHOLD=0.8

# =============================================================================
# CELERY (Фоновые задачи)
# =============================================================================
CELERY_BROKER_URL=redis://:change_me_redis_password@redis:6379/1
CELERY_RESULT_BACKEND=redis://:change_me_redis_password@redis:6379/2
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC

# =============================================================================
# BACKEND (FastAPI)
# =============================================================================
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_RELOAD=true
BACKEND_WORKERS=4

# API версионирование
API_V1_PREFIX=/api/v1

# Лимиты запросов (Rate Limiting)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000

# Размер загружаемых файлов (в байтах, 100MB по умолчанию)
MAX_UPLOAD_SIZE=104857600

# =============================================================================
# FRONTEND (React + Vite)
# =============================================================================
# Для локальной разработки frontend
VITE_API_URL=http://localhost:8000
VITE_API_V1_URL=http://localhost:8000/api/v1
VITE_WS_URL=ws://localhost:8000

# =============================================================================
# МОНИТОРИНГ И ЛОГИРОВАНИЕ
# =============================================================================
# Prometheus метрики
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Sentry (опционально, для production)
# SENTRY_DSN=
# SENTRY_ENVIRONMENT=production
# SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# EMAIL (опционально, для уведомлений)
# =============================================================================
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_FROM=noreply@seny.local
# SMTP_USE_TLS=true

# =============================================================================
# РАЗВИТИЕ И ТЕСТИРОВАНИЕ
# =============================================================================
# Тестовая база данных
TEST_DATABASE_URL=postgresql+asyncpg://seny:change_me_secure_password@localhost:5432/seny_test_db

# Отключение проверки API ключей для тестов
SKIP_API_KEY_VALIDATION=false

# =============================================================================
# ПРОИЗВОДСТВЕННОЕ ОКРУЖЕНИЕ (Production)
# =============================================================================
# Раскомментируйте и настройте для production
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=WARNING
# BACKEND_RELOAD=false
# BACKEND_WORKERS=8
# CORS_ORIGINS=https://yourdomain.com
# MINIO_USE_SSL=true
# RATE_LIMIT_ENABLED=true
