# –ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
_Exported on 11/28

# üìä –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ TenderFlow KB AI (SENY)

## üéØ –†–µ–∑—é–º–µ

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ **—Ä–∞–Ω–Ω–µ–π —Å—Ç–∞–¥–∏–∏ MVP-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —á–∞—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –º–æ–¥—É–ª—è Tender Management. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–∞ –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –æ–ø–µ—Ä–µ–∂–∞–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–¥–∞.

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### Backend
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|--------------|------------|--------|
| FastAPI + Async | ‚úÖ | ‚úÖ | –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ |
| SQLAlchemy 2.0 (async) | ‚úÖ | ‚úÖ | –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `Mapped`, `mapped_column` |
| –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | ‚úÖ | ‚úÖ | `modules/tender_management`, `modules/pricing_kb_ai` |
| –ú–æ–¥–µ–ª—å `Tender` | ‚úÖ | ‚úÖ | –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è —Å–æ–≤–ø–∞–¥–∞—é—Ç |
| –ú–æ–¥–µ–ª—å `Stage` | ‚úÖ | ‚úÖ | –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ |
| –ú–æ–¥–µ–ª—å `Position` | ‚úÖ | ‚úÖ | –ë–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
| –ú–æ–¥–µ–ª—å `Nomenclature` | ‚úÖ | ‚úÖ | –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ |
| CRUD API –¥–ª—è —Ç–µ–Ω–¥–µ—Ä–æ–≤ | ‚úÖ | ‚úÖ | GET/POST/PUT —Ä–∞–±–æ—Ç–∞—é—Ç |
| API —Å–º–µ–Ω—ã —Å—Ç–∞–¥–∏–∏ | ‚úÖ | ‚úÖ | `/change-stage` endpoint |

### Frontend
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|--------------|------------|--------|
| React 18 + TypeScript | ‚úÖ | ‚úÖ | Vite, TanStack Query |
| –°–ø–∏—Å–æ–∫ —Ç–µ–Ω–¥–µ—Ä–æ–≤ | ‚úÖ | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ https://seny.uralreduktor.com |
| –î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–µ–Ω–¥–µ—Ä–∞ | ‚úÖ | ‚úÖ | –° –ø–æ–∑–∏—Ü–∏—è–º–∏ –∏ —Å–º–µ–Ω–æ–π —Å—Ç–∞–¥–∏–∏ |
| –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã | ‚úÖ | ‚úÖ | CRUD –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| Tailwind CSS | ‚úÖ | ‚úÖ | –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ |

---

## ‚ö†Ô∏è –ß—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã / –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**

–ü–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (`data_models.md`) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å, –Ω–æ **–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã**:

| –ú–æ–¥–µ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|--------|----------|--------|
| `Task` | –ó–∞–¥–∞—á–∏ –ø–æ —Ç–µ–Ω–¥–µ—Ä—É | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ |
| `Notification` | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ |
| `AuditLog` | –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ |
| `CommercialProposal` | –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ |
| `StageTransition` | –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞–¥–∏–π | ‚ö†Ô∏è –ú–æ–¥–µ–ª—å –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| `TenderFile` | –§–∞–π–ª—ã —Ç–µ–Ω–¥–µ—Ä–∞ | ‚ö†Ô∏è –ú–æ–¥–µ–ª—å –µ—Å—Ç—å, –Ω–æ API –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç |

### 2. **–ú–æ–¥—É–ª—å DocFlow ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç**

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å (`docs/modules/docflow.md`):
- –®–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF/DOCX
- –ü–∞–∫–µ—Ç–Ω–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ ZIP
- –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å

**–§–∞–∫—Ç**: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `backend/app/modules/docflow/` **–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç**. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π GAP –¥–ª—è MVP.

### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏**

–ü–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (`system_architecture.md`):
> OAuth2 with Password Flow (Bearer Token), JWT (Access: 30 min, Refresh: 7 days)

**–§–∞–∫—Ç**: 
- –í –∫–æ–¥–µ `tenders.py` –µ—Å—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ `user_id = 1` —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º `# TODO: Get current user ID from token`
- –ú–æ–¥–µ–ª—å `User` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
- –ù–µ—Ç middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT

### 4. **Celery / –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏**

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç:
> OCR, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF, Email ‚Äî –≤ Celery

**–§–∞–∫—Ç**: 
- `celery_app/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- –ù–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Redis –∫–∞–∫ –±—Ä–æ–∫–µ—Ä–∞
- –ù–µ—Ç –≤–æ—Ä–∫–µ—Ä–æ–≤ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

### 5. **–¢–µ—Å—Ç—ã**

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç:
> Coverage > 80% –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

**–§–∞–∫—Ç**: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `backend/tests/` **–ø—É—Å—Ç–∞—è**.

### 6. **–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ —Å—Ö–µ–º–µ –ë–î**

| –ü–æ–ª–µ | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è |
|------|--------------|------------|
| `Tender.deadline` | `deadline` | `deadline_at` |
| `Tender.budget` | `budget` | `initial_max_price` |
| `Tender.customer` | ‚úÖ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ | ‚ùå –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç |
| `Position.tender_parameters` | JSONB | `technical_requirements` |
| `Position` —Å—Ç–∞—Ç—É—Å—ã | 7 –∑–Ω–∞—á–µ–Ω–∏–π enum | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |

### 7. **Frontend ‚Äî Dashboard**

–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (`/`) –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç:
```
Dashboard (UPDATED)
```

–ü–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∞ (FR-3)
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–µ–¥–ª–∞–π–Ω–æ–≤ (FR-4)
- –ë–∞–∑–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (FR-6)

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ù–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. API –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫—Ä—ã—Ç. (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ)

2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞–¥–∏–π**: 
   - `StageService.change_stage` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª—é–±—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
   - –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥—Ä–∞—Ñ–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏–∑ `StageTransition`
   - –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å–ª–æ–≤–∏–π (requires_all_positions_calculated –∏ —Ç.–¥.)

3. **N+1 –ø—Ä–æ–±–ª–µ–º—ã**: 
   - –í `TenderService.get_all()` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `selectinload` –¥–ª—è `positions`
   - –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ø–∏—Å–∫–∞ —Ç–µ–Ω–¥–µ—Ä–æ–≤ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

4. **–ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç Audit Log, –Ω–æ –æ–Ω –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.

---

## üìà –û—Ü–µ–Ω–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ MVP

| –ú–æ–¥—É–ª—å | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
|--------|--------------|------------|------------|
| Tender Management (–±–∞–∑–æ–≤—ã–π CRUD) | 100% | 40% | üü° |
| Tender Management (State Machine) | 100% | 15% | üî¥ |
| Tender Management (Kanban/Calendar) | 100% | 0% | üî¥ |
| Tender Management (Notifications) | 100% | 0% | üî¥ |
| Pricing KB AI | –û—Ç–ª–æ–∂–µ–Ω–æ | 10% | ‚ö™ Out of MVP |
| DocFlow | 100% | 0% | üî¥ |
| Auth & RBAC | 100% | 0% | üî¥ |
| Testing | 100% | 0% | üî¥ |

---

## üîó –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π URL

–°–∞–π—Ç https://seny.uralreduktor.com/ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Ç–µ–Ω–¥–µ—Ä–æ–≤ (3 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø–∏—Å–∏)
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–µ–Ω–¥–µ—Ä–∞ —Å –ø–æ–∑–∏—Ü–∏—è–º–∏
- –†–∞–±–æ—Ç–∞–µ—Ç —Å–º–µ–Ω–∞ —Å—Ç–∞–¥–∏–∏ —á–µ—Ä–µ–∑ dropdown
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã –ø—É—Å—Ç–∞—è (–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
