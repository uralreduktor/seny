# Технологический стек

## Обзор

Проект TenderFlow KB AI использует современный технологический стек с акцентом на производительность, масштабируемость и интеграцию AI/ML компонентов.

## Backend

### Язык программирования
- **Python 3.11+** — строгая типизация, использование `typing`, проверка типов через `mypy`

### Web Framework
- **FastAPI 0.110+** — асинхронный веб-фреймворк
  - asyncio для асинхронных операций
  - Pydantic v2 для валидации данных и моделей
  - Автоматическая генерация OpenAPI спецификации

### База данных
- **PostgreSQL 16** — основная реляционная БД
- **pgvector 0.7+** — расширение для векторного поиска (embeddings)

### ORM
- **SQLAlchemy 2.0+** — асинхронный ORM с поддержкой async/await

### Кеш и очереди
- **Redis 7** — кеширование и хранение сессий
- **Celery 5** — фоновые задачи (обработка OCR, генерация документов)

### Хранилище файлов
- **MinIO** — S3-совместимое хранилище для чертежей, документов, файлов

## AI/ML

### Языковые модели
- **Claude 3.5 Sonnet** — основная модель для AI-ассистента и RAG
- **GPT-4o** — резервная модель для специфических задач

### Embeddings
- **OpenAI text-embedding-3-large** — модель для генерации эмбеддингов (3072 размерности)

### RAG Framework
- **LangChain 0.2+** или **LlamaIndex 0.11+** — оркестрация RAG-паттернов

### Computer Vision и OCR
- **YOLOv11** — детекция объектов на чертежах
- **EasyOCR** — оптическое распознавание текста на чертежах

## Frontend

### Framework
- **React 18** — библиотека для построения пользовательских интерфейсов
- **TypeScript 5.3+** — строгий режим, запрет на использование `any`

### Сборка
- **Vite** — быстрый сборщик для разработки и production

### Управление состоянием и запросами
- **TanStack Query v5** — кеширование запросов и управление серверным состоянием

### Стилизация
- **Tailwind CSS** — utility-first CSS framework

### UI компоненты
- **shadcn/ui** — набор переиспользуемых компонентов (предпочтительно)

## Инфраструктура

### Контейнеризация
- **Docker** — контейнеризация приложений
- **Docker Compose** — оркестрация для development окружения

### Оркестрация (Production)
- **Kubernetes 1.29+** — оркестрация контейнеров в production

### Мониторинг
- **Grafana** — визуализация метрик и логов
- **Prometheus** — сбор метрик
- **Loki** — агрегация логов

## Инструменты разработки

### Генерация API клиентов
- **OpenAPI Generator 7.0+** — генерация TypeScript клиентов из OpenAPI спецификации FastAPI

### Тестирование
- **Pytest** — тестирование Python кода
- **Vitest** — тестирование TypeScript/React кода
- **Cypress** — E2E тестирование (планируется)

### Линтинг и форматирование
- **Black** — форматирование Python кода
- **mypy** — проверка типов Python
- **ESLint** — линтинг TypeScript/JavaScript
- **Prettier** — форматирование TypeScript/JavaScript

## Версии и зависимости

### Backend зависимости
```toml
# Пример pyproject.toml
python = "^3.11"
fastapi = "^0.110.0"
sqlalchemy = "^2.0.0"
pydantic = "^2.0.0"
psycopg[binary] = "^3.1.0"
pgvector = "^0.7.0"
redis = "^5.0.0"
celery = "^5.3.0"
langchain = "^0.2.0"
openai = "^1.0.0"
anthropic = "^0.18.0"
```

### Frontend зависимости
```json
{
  "react": "^18.2.0",
  "typescript": "^5.3.0",
  "@tanstack/react-query": "^5.0.0",
  "tailwindcss": "^3.4.0"
}
```

## Требования к окружению

### Development
- Python 3.11+
- Node.js 18+
- Docker и Docker Compose
- PostgreSQL 16 (локально или в Docker)
- Redis 7 (локально или в Docker)

### Production
- Kubernetes 1.29+
- PostgreSQL 16 с pgvector
- Redis 7
- MinIO или совместимое S3 хранилище
- Мониторинг: Grafana + Prometheus + Loki

## Обновления стека

Версии технологий обновляются согласно политике безопасности проекта. Критические обновления применяются в течение 30 дней после релиза патча безопасности.

**Последнее обновление**: 2025-01-XX  
**Ответственный**: Команда разработки

---

**Связанные документы:**
- [Архитектура системы](./system_architecture.md)
- [AI компоненты](./ai_components.md)
- [Инструкции по установке](../development/setup.md)

